description = "文本预处理 - 清理和规范化样本文本"

prompt = """
使用 novel preprocess CLI 命令对样本文本进行预处理，清除无关内容，统一格式，为后续 NLP 分析做准备。

用户输入：{{args}}

## 任务目标

对样本文本进行智能预处理，包括：
- 移除目录页、页码、页眉页脚
- 移除版权声明、出版信息
- 统一标点符号为中文全角
- 规范化章节标题格式
- 清理多余空白字符

## 执行步骤

### 1. 确认文件路径
询问用户要处理的文件路径（如果未提供）。
建议路径格式：`samples/作者名/书名.txt`

### 2. 执行预处理命令
运行以下命令：
```bash
novel preprocess <file> --quality
```

示例：
```bash
novel preprocess samples/jinyong/射雕英雄传.txt --quality
```

### 3. 解读结果
展示预处理统计：
- 原始长度 vs 处理后长度
- 减少比例
- 处理步骤详情

展示质量评估：
- 中文占比（建议 > 90%）
- 标点占比（建议 5-10%）
- 空白占比（建议 < 2%）
- 重复行占比（建议 < 1%）

### 4. 保存结果（可选）
如果用户需要保存，运行：
```bash
novel preprocess <file> -o clean/<作者名>/<书名>.txt
```

### 5. 建议下一步
根据质量评估结果：
- **质量优秀（> 90分）**：建议进行 NLP 分析
- **质量一般（70-90分）**：建议检查文本内容
- **质量较差（< 70分）**：建议手动清理后重新预处理

## 质量评分标准

| 指标 | 优秀 | 正常 | 需改进 |
|------|------|------|--------|
| 中文占比 | > 90% | 80-90% | < 80% |
| 标点占比 | 5-10% | 3-12% | < 3% 或 > 12% |
| 空白占比 | < 1% | 1-2% | > 2% |
| 重复行 | < 0.5% | 0.5-1% | > 1% |

## 工作流程建议

完整的样本准备流程：
```bash
# 1. 预处理样本文本
novel preprocess samples/jinyong/射雕英雄传.txt --quality

# 2. 如果质量合格，保存到 clean 目录
novel preprocess samples/jinyong/射雕英雄传.txt -o clean/jinyong/射雕英雄传.txt

# 3. 进行 NLP 分析
novel analyze clean/jinyong/射雕英雄传.txt --verbose

# 4. 开始风格学习
/style-learn clean/jinyong/ --name="金庸风格"
```

## 常见问题处理

**问题1：中文占比低**
- 原因：文本包含大量英文、数字或符号
- 解决：手动清理非中文内容

**问题2：标点占比异常**
- 原因：标点使用不规范或过多/过少
- 解决：检查原文质量

**问题3：空白占比高**
- 原因：文本包含过多空行或空格
- 解决：预处理会自动清理，如仍高则手动检查

**问题4：重复行多**
- 原因：文本包含重复内容（如页眉页脚）
- 解决：预处理会自动移除，如仍多则手动清理

## 完成提示
✅ 文本预处理完成！建议下一步：使用 /nlp-analyze 进行深度分析
"""
